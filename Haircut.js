// Gemini package
import {GoogleGenAI} from "@google/genai";
//import dotenv to load environment variables from .env file
import dotenv from "dotenv";
dotenv.config();
//import file system module to write image files
import fs from "fs";
//creating an instance of GoogleGenAI, providing apiKey and model parameters
const ai = new GoogleGenAI({
    apiKey: process.env.MY_API_KEY,
});
//make first request from API
async function APIRequest() {
    const response = await ai.models.generateImages({
        model: "imagen-4.0-generate-001",
        prompt: "A natural photo of me with a fresh razor fade haircut, casual style, same facial expression, realistic lighting, natural tones, no retouch, smooth skin texture, realistic photo effect",
        config:{
            numberOfImages:4,
        }
    })
    //set index to get the first image from the response
    let index = 0;
    //iterate through the images in the response
    for(const generateImage of response.generatedImages){
        //define byte size
        let imgByte = generateImage.image.imageBytes;
        //convert byte size to buffer
        let buffer = Buffer.from(imgByte,'base64');
        //write file to local directory to create image generated by API
        fs.writeFileSync(`HaircutImage${index}.png`,buffer);
        console.log(`Image ${index} saved.`);
        index++;
    }
}
APIRequest();